<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L·ª∞A CH·ªåN PH∆Ø∆†NG √ÅN TH·ª∞C H√ÄNH ƒêO GIA T·ªêC TR·ªåNG TR∆Ø·ªúNG</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(180deg, #f7faff, #e9f1ff);
      color: #333;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    header {
      text-align: center;
      margin-top: 30px;
    }

    h1 {
      color: #0055cc;
      margin: 5px 0 10px;
    }

    h3 {
      color: #555;
      margin-bottom: 10px;
    }

    form {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin: 15px;
      width: 320px;
    }

    select, input, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
    }

    button {
      background: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #0056b3;
    }

    .btn-secondary {
      background: #aaa;
    }

    .btn-info {
      background: #28a745;
    }

    .btn-info:hover {
      background: #1c7a34;
    }

    .groups {
      width: 90%;
      max-width: 700px;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 40px;
    }

    .group {
      margin-bottom: 15px;
    }

    .group h3 {
      background: #e9f3ff;
      padding: 6px 10px;
      border-radius: 6px;
    }

    .actions {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    /* üíé Ph·∫ßn hi·ªÉn th·ªã nh√≥m c·ªßa t√¥i ƒë·∫πp h∆°n */
    #myGroupResult {
      background: linear-gradient(135deg, #e0f7e9, #c2e9fb);
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      width: 340px;
      display: none;
      margin-bottom: 20px;
      text-align: center;
      animation: fadeIn 0.6s ease-in-out;
    }

    #myGroupResult h3 {
      color: #006400;
      font-size: 18px;
      margin-bottom: 10px;
    }

    #myGroupResult p {
      background: white;
      padding: 10px;
      border-radius: 10px;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
      color: #333;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <header>
    <h1>L·ª∞A CH·ªåN PH∆Ø∆†NG √ÅN TH·ª∞C H√ÄNH ƒêO GIA T·ªêC TR·ªåNG TR∆Ø·ªúNG</h1>
    <h3>L·ªöP V·∫¨T L√ç 10 H123</h3>
  </header>

  <form id="surveyForm">
    <label>H·ªç v√† t√™n:</label>
    <input type="text" id="name" required placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n">

    <label>Ch·ªçn ch·ªß ƒë·ªÅ:</label>
    <select id="choice" required>
      <option value="">-- Ch·ªçn m·ªôt ph∆∞∆°ng √°n --</option>
      <option>1. Con l·∫Øc ƒë∆°n</option>
      <option>2. ƒêo th·ªùi gian v·∫≠t r∆°i t·ª± do</option>
      <option>3. ƒêo v·∫≠n t·ªëc</option>
      <option>4. Dao ƒë·ªông c·ªßa con l·∫Øc l√≤ xo</option>
      <option>5. Con l·∫Øc v·∫≠t l√≠</option>
      <option>6. Con l·∫Øc ƒë·∫£o ng∆∞·ª£c</option>
      <option>7. Ph√¢n t√≠ch ho·∫°t nghi·ªám</option>
      <option>8. D√πng c·∫£m bi·∫øn gia t·ªëc</option>
      <option>9. Con l·∫Øc n∆∞·ªõc</option>
      <option>10. C·∫£m bi·∫øn √°p su·∫•t</option>
      <option>11. Dao ƒë·ªông con quay</option>
      <option>12. Con l·∫Øc xo·∫Øn</option>
    </select>

    <button type="submit">‚úÖ G·ª≠i l·ª±a ch·ªçn</button>
  </form>

  <div class="actions">
    <button id="myGroupBtn" class="btn-info">üîç Xem nh√≥m c·ªßa t√¥i</button>
    <button id="exportBtn">üì• Xu·∫•t Excel</button>
    <button id="clearBtn" class="btn-secondary">üóë X√≥a d·ªØ li·ªáu</button>
  </div>

  <div id="myGroupResult"></div>

  <div class="groups" id="groupsDisplay">
    <h2>K·∫øt qu·∫£ gh√©p nh√≥m</h2>
    <p>Ch∆∞a c√≥ d·ªØ li·ªáu...</p>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script>
    const form = document.getElementById("surveyForm");
    const groupsDisplay = document.getElementById("groupsDisplay");
    const clearBtn = document.getElementById("clearBtn");
    const exportBtn = document.getElementById("exportBtn");
    const myGroupBtn = document.getElementById("myGroupBtn");
    const myGroupResult = document.getElementById("myGroupResult");

    let participants = JSON.parse(localStorage.getItem("participants") || "[]");

    function updateGroups() {
      if (participants.length === 0) {
        groupsDisplay.innerHTML = "<h2>K·∫øt qu·∫£ gh√©p nh√≥m</h2><p>Ch∆∞a c√≥ d·ªØ li·ªáu...</p>";
        return;
      }

      const groups = {};
      participants.forEach(p => {
        if (!groups[p.choice]) groups[p.choice] = [];
        groups[p.choice].push(p.name);
      });

      let html = "<h2>K·∫øt qu·∫£ gh√©p nh√≥m</h2>";
      Object.keys(groups).forEach(choice => {
        html += `<div class='group'><h3>${choice}</h3><p>${groups[choice].join(", ")}</p></div>`;
      });
      groupsDisplay.innerHTML = html;
    }

    form.addEventListener("submit", e => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const choice = document.getElementById("choice").value;
      if (!name || !choice) return alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!");
      participants.push({ name, choice });
      localStorage.setItem("participants", JSON.stringify(participants));
      updateGroups();
      form.reset();
      alert("‚úÖ ƒê√£ l∆∞u l·ª±a ch·ªçn!");
    });

    clearBtn.addEventListener("click", () => {
      if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a to√†n b·ªô d·ªØ li·ªáu kh√¥ng?")) {
        participants = [];
        localStorage.removeItem("participants");
        updateGroups();
        myGroupResult.style.display = "none";
      }
    });

    exportBtn.addEventListener("click", () => {
      if (participants.length === 0) return alert("Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ xu·∫•t!");
      const groups = {};
      participants.forEach(p => {
        if (!groups[p.choice]) groups[p.choice] = [];
        groups[p.choice].push(p.name);
      });
      const sheetData = [["Ch·ªß ƒë·ªÅ", "Danh s√°ch th√†nh vi√™n"]];
      Object.keys(groups).forEach(choice => {
        sheetData.push([choice, groups[choice].join(", ")]);
      });
      const wb = XLSX.utils.book_new();
      const ws = XLSX.utils.aoa_to_sheet(sheetData);
      XLSX.utils.book_append_sheet(wb, ws, "K·∫øt qu·∫£");
      XLSX.writeFile(wb, "ketqua_ghepnhom.xlsx");
    });

    myGroupBtn.addEventListener("click", () => {
      const name = prompt("Nh·∫≠p t√™n c·ªßa b·∫°n ƒë·ªÉ xem nh√≥m:");
      if (!name) return;
      const member = participants.find(p => p.name.toLowerCase() === name.trim().toLowerCase());
      if (!member) {
        alert("‚ùå Kh√¥ng t√¨m th·∫•y t√™n trong danh s√°ch!");
        return;
      }
      const groupMembers = participants.filter(p => p.choice === member.choice).map(p => p.name);
      myGroupResult.style.display = "block";
      myGroupResult.innerHTML = `
        <h3>üîπ Nh√≥m c·ªßa b·∫°n: <b>${member.choice}</b></h3>
        <p><b>Th√†nh vi√™n:</b><br>${groupMembers.join("<br>")}</p>
      `;
      myGroupResult.scrollIntoView({ behavior: "smooth" });
    });

    updateGroups();
  </script>
</body>
</html>
